server {
    listen 80;
    server_name devapi.notavaa.com;
    return 308 https://$host$request_uri;
}

# سرور شماره ۲: سرور اصلی برای ترافیک امن HTTPS
server {
    listen 443 ssl;
    http2 on;
    server_name devapi.notavaa.com;

    ssl_certificate /etc/nginx/certs/devapi.notavaa.com.crt;
    ssl_certificate_key /etc/nginx/certs/devapi.notavaa.com.key;

    include snippets/ssl_params.conf;

    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;

    
    client_max_body_size 50m;
    
    proxy_intercept_errors on;
    error_page 502 503 504 /50x.html;
    location = /50x.html { 
        internal; 
        return 502 "Upstream temporarily unavailable\n"; 
    }

    include /etc/nginx/services.d/*.conf;
}